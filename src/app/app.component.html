<div class="pageHeader">
  CompareHelper
</div>
<div class="flex flex-wrap column-gap-4 row-gap-6">
  <p-card>
    <ng-template pTemplate="header">
      <div class="flex align-items-center justify-content-between bg-blue-50">
        <div class="text-lg font-semibold m-3">
             Användare att jämföra
        </div>
        <div class="align-items-center m-3">
          <p-button id="manageGroup" icon="pi pi-user-edit" (click)="showManageGroupDialog()"></p-button>
        </div>
      </div>
    </ng-template>
    <div class="grid">
      <ng-container *ngFor="let userinfo of groupDecorated">
        <div class="col-1">
          <p-checkbox name="usergroup" [value]="userinfo.user" [(ngModel)]="selectedUsers" (onChange)="handleUserselection()"></p-checkbox>
        </div>
        <div class="col-7">
          <span class="white-space-nowrap">{{userinfo.userInfo.name}} <span [class]="getFlagClass(userinfo.userInfo.country)"></span> </span>
        </div>
        <div class="col-2 text-right">
          +{{userinfo.userInfo.pointsPerHour}}
        </div>
        <div class="col-2 text-right">
          {{userinfo.userInfo.points}}
        </div>
      </ng-container>
    </div>
  </p-card>

  <p-card>
    <ng-template pTemplate="header">
      <div class="flex align-items-center justify-content-between bg-blue-50">
        <div class="text-lg font-semibold m-3">
          Ansträngning
        </div>
      </div>
    </ng-template>
    <p-table [value]="selectedTurfEfforts">
      <ng-template pTemplate="header">
        <tr>
          <th>Användare</th>
          <th>Nedlagd tid</th>
          <th>Poäng</th>
          <th>Takes</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-effort>
        <tr>
          <td>{{effort.username}}</td>
          <td>{{effort.timeSpent}}</td>
          <td class="text-right">{{effort.points}}</td>
          <td class="text-right">{{effort.takes}}</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
  <p-card>
    <ng-template pTemplate="header">
      <div class="flex align-items-center justify-content-between bg-blue-50">
        <div class="text-lg font-semibold m-3">
          Ackumulerad poäng
        </div>
      </div>
    </ng-template>
    <p-chart type="line" [data]="dataCumulative" [options]="optionsCumulative" width="90vw" height="60vh"></p-chart>
  </p-card>
</div>

<app-manage-group-dialog [(displayDialog)]="displayManageGroupDialog" [usersToSave]="groupToModify" (usersToSaveChange)="handleManagedGroup($event)" ></app-manage-group-dialog>
